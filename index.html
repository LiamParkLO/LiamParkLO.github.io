<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Babylon.js Cube</title>
    <script src="https://cdn.babylonjs.com/babylon.js"></script>
    <script src="https://cdn.babylonjs.com/gui/babylon.gui.min.js"></script>
    <style>
        html, body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            width: 100%;
            height: 100%;
        }

        #renderCanvas {
            width: 100%;
            height: 100%;
            touch-action: none;
        }
    </style>
</head>
<body>
<canvas id="renderCanvas"></canvas>
<script>
    const canvas = document.getElementById("renderCanvas");
    const engine = new BABYLON.Engine(canvas, true);

    const createScene = function () {
        const scene = new BABYLON.Scene(engine);

        // Lighting
        const light = new BABYLON.HemisphericLight("light", new BABYLON.Vector3(0, 1, 0), scene);

        // Box
        const box = BABYLON.MeshBuilder.CreateBox("box", { size: 2 }, scene);
        box.position.y = 1; // Lift it above the floor

        // Floor
        const ground = BABYLON.MeshBuilder.CreateGround("ground", { width: 20, height: 20 }, scene);

        // Camera that orbits the box
        const camera = new BABYLON.ArcRotateCamera("camera",
            Math.PI / 4, Math.PI / 4, 10, box.position, scene);
        camera.attachControl(canvas, true);
        camera.lowerRadiusLimit = 2;
        camera.upperRadiusLimit = 20;
        camera.wheelDeltaPercentage = 0.01;
        camera.lowerBetaLimit = 0.1;
        camera.upperBetaLimit = Math.PI - 0.1;
        camera.inputs.attached.pointers.panningSensibility = 0;

        // Movement
        const inputMap = {};
        scene.actionManager = new BABYLON.ActionManager(scene);
        scene.actionManager.registerAction(new BABYLON.ExecuteCodeAction(
            BABYLON.ActionManager.OnKeyDownTrigger, evt => inputMap[evt.sourceEvent.key] = evt.sourceEvent.type === "keydown"));
        scene.actionManager.registerAction(new BABYLON.ExecuteCodeAction(
            BABYLON.ActionManager.OnKeyUpTrigger, evt => inputMap[evt.sourceEvent.key] = evt.sourceEvent.type === "keydown"));

        scene.onBeforeRenderObservable.add(() => {
            let speed = 0.1;
            let forward = new BABYLON.Vector3(
                Math.sin(camera.alpha),
                0,
                Math.cos(camera.alpha)
            ).normalize();

            let right = new BABYLON.Vector3(
                Math.sin(camera.alpha + Math.PI / 2),
                0,
                Math.cos(camera.alpha + Math.PI / 2)
            ).normalize();

            if (inputMap["w"]) {
                box.position.addInPlace(forward.scale(speed));
            }
            if (inputMap["s"]) {
                box.position.addInPlace(forward.scale(-speed));
            }
            if (inputMap["a"]) {
                box.position.addInPlace(right.scale(-speed));
            }
            if (inputMap["d"]) {
                box.position.addInPlace(right.scale(speed));
            }

            // Update camera to follow the box
            camera.target = box.position;
        });

        return scene;
    };

    const scene = createScene();
    engine.runRenderLoop(() => scene.render());
    window.addEventListener("resize", () => engine.resize());
</script>
</body>
</html>
